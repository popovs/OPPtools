<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="OPPtools">
<title>OPP workflow • OPPtools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="OPP workflow">
<meta property="og:description" content="OPPtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">OPPtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/OPP-workflow.html">OPP workflow</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="OPP-workflow_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="OPP-workflow_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="OPP-workflow_files/leaflet-1.3.1/leaflet.js"></script><link href="OPP-workflow_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="OPP-workflow_files/proj4-2.6.2/proj4.min.js"></script><script src="OPP-workflow_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="OPP-workflow_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="OPP-workflow_files/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="OPP-workflow_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="OPP-workflow_files/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script><script src="OPP-workflow_files/pop_bbmm_9516d0-1/data_stars_pop_bbmm6b3f1d.txt"></script><script src="OPP-workflow_files/joda-0.0.1/joda.js"></script><script src="OPP-workflow_files/joda-0.0.1/addImageQuery-bindings.js"></script><script src="OPP-workflow_files/clipboard-0.0.1/setClipboardText.js"></script><link href="OPP-workflow_files/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="OPP-workflow_files/HomeButton-0.0.1/home-button.js"></script><script src="OPP-workflow_files/HomeButton-0.0.1/easy-button-src.min.js"></script><link href="OPP-workflow_files/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="OPP-workflow_files/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">
<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>OPP workflow</h1>
            <h3 data-toc-skip class="subtitle">A step-by-step tutorial
on visualizing seabird foraging trips and key at-sea areas.</h3>
            
      
      
      <div class="d-none name"><code>OPP-workflow.Rmd</code></div>
    </div>

    
    
<p>This package contains analysis tools for processing seabird tracking
data collected under Canada’s Oceans Protection Plan. The workflow aims
to identify at-sea trips for central place foraging seabirds, then use
those trips to estimate key areas of use while the birds are at sea. Key
areas are estimated using two approaches: a traditional kernel density
estimation and a Brownian Bridge Movement Model (BBMM) based kernel
density estimation.</p>
<p>The core of this package is built around the existing R package
<code>track2KBA</code>, and further documentation on
<code>track2KBA</code> methodology can be found in <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/ddi.12411" class="external-link">Lascelles
et al. 2016</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The <code>OPPtools</code> package can be downloaded and installed
from Github if you have previously downloaded the <code>devtools</code>
package. The second package you will need for this workflow is
<code>track2KBA</code>, which is available for download from CRAN.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install OPPtools</span>
<span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'popovs/OPPtools'</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://popovs.github.io/OPPtools/">OPPtools</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-preparation">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>The workflow in this package is designed to work smoothly with data
stored on Movebank. In order to download data, you will need to provide
your Movebank credentials. <code>OPPtools</code> has an optional
convenience function, <code>opp_movebank_key</code>, that allows you to
securely store an encrypted copy of your Movebank credentials. If you
set your credentials this way, you will not be prompted to enter your
Movebank credentials further by any future function calls.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/opp_movebank_key.html">opp_movebank_key</a></span><span class="op">(</span>username <span class="op">=</span> <span class="st">"my_movebank_username"</span><span class="op">)</span> <span class="co"># You will then be prompted to enter your password</span></code></pre></div>
<p>We can then download data directly off of Movebank. If you stored
your credentials using <code>opp_movebank_key</code>, the data will be
downloaded directly. Otherwise, you will be prompted to enter your
Movebank username and password in the console.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">murres</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opp_download_data.html">opp_download_data</a></span><span class="op">(</span><span class="fl">248994009</span><span class="op">)</span></code></pre></div>
<p>In these examples, data for <em>thick-billed murres</em> from Coats
Island are also already bundled with the package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">murres</span><span class="op">)</span> <span class="co"># same output as `opp_download_data(248994009)`</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">murres</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="5%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="2%">
<col width="7%">
<col width="1%">
<col width="6%">
<col width="10%">
<col width="6%">
<col width="3%">
<col width="7%">
<col width="6%">
<col width="5%">
<col width="3%">
<col width="5%">
<col width="1%">
<col width="2%">
<col width="2%">
</colgroup>
<thead><tr class="header">
<th align="left">timestamp</th>
<th align="right">location_long</th>
<th align="right">location_lat</th>
<th align="left">sensor_type</th>
<th align="right">local_identifier</th>
<th align="left">ring_id</th>
<th align="left">taxon_canonical_name</th>
<th align="left">sex</th>
<th align="left">animal_life_stage</th>
<th align="left">animal_reproductive_condition</th>
<th align="right">number_of_events</th>
<th align="left">study_site</th>
<th align="right">deploy_on_longitude</th>
<th align="right">deploy_on_latitude</th>
<th align="right">deployment_id</th>
<th align="right">tag_id</th>
<th align="right">individual_id</th>
<th align="right">year</th>
<th align="right">month</th>
<th align="left">season</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2010-07-23 03:01:22</td>
<td align="right">-82.01563</td>
<td align="right">62.94722</td>
<td align="left">GPS</td>
<td align="right">118600227</td>
<td align="left">NA</td>
<td align="left">Uria lomvia</td>
<td align="left">u</td>
<td align="left">Adult</td>
<td align="left">Chicks</td>
<td align="right">2034</td>
<td align="left">Coats</td>
<td align="right">-82.0157</td>
<td align="right">62.9477</td>
<td align="right">248997568</td>
<td align="right">248996949</td>
<td align="right">248996948</td>
<td align="right">2010</td>
<td align="right">7</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">2010-07-23 03:03:52</td>
<td align="right">-82.01509</td>
<td align="right">62.94721</td>
<td align="left">GPS</td>
<td align="right">118600227</td>
<td align="left">NA</td>
<td align="left">Uria lomvia</td>
<td align="left">u</td>
<td align="left">Adult</td>
<td align="left">Chicks</td>
<td align="right">2034</td>
<td align="left">Coats</td>
<td align="right">-82.0157</td>
<td align="right">62.9477</td>
<td align="right">248997568</td>
<td align="right">248996949</td>
<td align="right">248996948</td>
<td align="right">2010</td>
<td align="right">7</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">2010-07-23 03:05:54</td>
<td align="right">-82.01595</td>
<td align="right">62.94711</td>
<td align="left">GPS</td>
<td align="right">118600227</td>
<td align="left">NA</td>
<td align="left">Uria lomvia</td>
<td align="left">u</td>
<td align="left">Adult</td>
<td align="left">Chicks</td>
<td align="right">2034</td>
<td align="left">Coats</td>
<td align="right">-82.0157</td>
<td align="right">62.9477</td>
<td align="right">248997568</td>
<td align="right">248996949</td>
<td align="right">248996948</td>
<td align="right">2010</td>
<td align="right">7</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">2010-07-23 03:07:55</td>
<td align="right">-82.01580</td>
<td align="right">62.94714</td>
<td align="left">GPS</td>
<td align="right">118600227</td>
<td align="left">NA</td>
<td align="left">Uria lomvia</td>
<td align="left">u</td>
<td align="left">Adult</td>
<td align="left">Chicks</td>
<td align="right">2034</td>
<td align="left">Coats</td>
<td align="right">-82.0157</td>
<td align="right">62.9477</td>
<td align="right">248997568</td>
<td align="right">248996949</td>
<td align="right">248996948</td>
<td align="right">2010</td>
<td align="right">7</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">2010-07-23 03:09:56</td>
<td align="right">-82.01556</td>
<td align="right">62.94723</td>
<td align="left">GPS</td>
<td align="right">118600227</td>
<td align="left">NA</td>
<td align="left">Uria lomvia</td>
<td align="left">u</td>
<td align="left">Adult</td>
<td align="left">Chicks</td>
<td align="right">2034</td>
<td align="left">Coats</td>
<td align="right">-82.0157</td>
<td align="right">62.9477</td>
<td align="right">248997568</td>
<td align="right">248996949</td>
<td align="right">248996948</td>
<td align="right">2010</td>
<td align="right">7</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">2010-07-23 03:11:57</td>
<td align="right">-82.01621</td>
<td align="right">62.94722</td>
<td align="left">GPS</td>
<td align="right">118600227</td>
<td align="left">NA</td>
<td align="left">Uria lomvia</td>
<td align="left">u</td>
<td align="left">Adult</td>
<td align="left">Chicks</td>
<td align="right">2034</td>
<td align="left">Coats</td>
<td align="right">-82.0157</td>
<td align="right">62.9477</td>
<td align="right">248997568</td>
<td align="right">248996949</td>
<td align="right">248996948</td>
<td align="right">2010</td>
<td align="right">7</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="explore-raw-tracks">Explore raw tracks<a class="anchor" aria-label="anchor" href="#explore-raw-tracks"></a>
</h2>
<p>The <code>opp_map</code> function allows you to quickly plot up your
raw Movebank tracks to visualize them. The orange dot represents the
Movebank project site, which in the case of our seabirds is the same as
the colony location.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/opp_map.html">opp_map</a></span><span class="op">(</span><span class="va">murres</span><span class="op">)</span></code></pre></div>
<p><img src="OPP-workflow_files/figure-html/plot%20raw%20tracks-1.png" width="90%" style="display: block; margin: auto;"></p>
<p>Another useful thing to examine prior to continuing the workflow is a
simple plot of time traveled vs. distance from colony for each bird.
Looking at this will allow you to make informed decisions on minimum and
maximum distances traveled during individual foraging trips in addition
to time elapsed during foraging trips.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/opp_explore_trips.html">opp_explore_trips</a></span><span class="op">(</span><span class="va">murres</span><span class="op">)</span></code></pre></div>
<p><img src="OPP-workflow_files/figure-html/plot%20time%20vs%20distance-1.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/plot%20time%20vs%20distance-2.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/plot%20time%20vs%20distance-3.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/plot%20time%20vs%20distance-4.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/plot%20time%20vs%20distance-5.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/plot%20time%20vs%20distance-6.png" width="90%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="define-trips">Define trips<a class="anchor" aria-label="anchor" href="#define-trips"></a>
</h2>
<p>From the above track exploration, we can extract reasonable trip
parameters for the next stage of the workflow: the
<code>opp_get_trips</code> function. It seems that most trips are
characterized by a minimum distance of at least 2 km away from the
colony. Additionally, a distance of 15 km seems reasonable to capture
any trips where the bird went offshore but the logger than died (i.e.,
incomplete trips). This 15 km value will be used by
<code>opp_get_trips</code> to mark any incomplete trips. Finally, based
on these plots, it looks like we want to filter out any tracks that
spend less than 2 hours away from the colony. In short, we’re saying
that any tracks that achieve of a distance of &gt;2 km away from the
colony for at least 2 hours can qualify as a ‘trip’.</p>
<p>We also need to trim down the data using the <code>opp2KBA</code>
function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">innerBuff</span> <span class="op">=</span> <span class="fl">2</span> <span class="co"># (km) minimum distance from the colony to be in a trip</span>
<span class="va">returnBuff</span> <span class="op">=</span> <span class="fl">15</span> <span class="co"># (km) outer buffer to capture incomplete return trips</span>
<span class="va">duration</span> <span class="op">=</span> <span class="fl">2</span> <span class="co"># (hrs) minimum trip duration</span>

<span class="va">murres</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opp2KBA.html">opp2KBA</a></span><span class="op">(</span><span class="va">murres</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="extract-trips">Extract trips<a class="anchor" aria-label="anchor" href="#extract-trips"></a>
</h3>
<p>The <code>opp_get_trips</code> function will return a
SpatialPointsDataFrame containing the GPS track locations for each bird,
grouped by a trip ID. It will also label all GPS points deemed not to be
part of a trip. If <code>showPlots = TRUE</code> (the default), plots
visualizing the trips will be output.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trips</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opp_get_trips.html">opp_get_trips</a></span><span class="op">(</span><span class="va">murres</span>, 
                       innerBuff <span class="op">=</span> <span class="va">innerBuff</span>, 
                       returnBuff <span class="op">=</span> <span class="va">returnBuff</span>,
                       duration <span class="op">=</span> <span class="va">duration</span><span class="op">)</span></code></pre></div>
<p><img src="OPP-workflow_files/figure-html/trips-1.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/trips-2.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/trips-3.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/trips-4.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/trips-5.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/trips-6.png" width="90%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="interpolate-tracks">Interpolate tracks<a class="anchor" aria-label="anchor" href="#interpolate-tracks"></a>
</h2>
<p>One of the primary end-data products of this workflow is a kernel
density estimate of seabird space use. However, a key statistical
assumption of kernel densities is an even sampling regime. In the case
of GPS points, this would mean an even gap of time between each data
point. The current data do not satisfy this assumption. To account for
this, we must first <em>interpolate</em> the data. The OPPTools library
uses the crawl interpolation method to do so. See
<code><a href="../reference/ctcrw_interpolation.html">?ctcrw_interpolation</a></code> for more information.</p>
<p>The output plots for <code>ctcrw_interpolation</code> are similar to
the ones above, except for the addition of green circles. The green
circles indicate interpolated tracks. The function only interpolated
tracks identified as “Complete” by <code>opp_get_trips</code> above.
This can be adjusted with the <code>type</code> argument in the
function.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">interp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ctcrw_interpolation.html">ctcrw_interpolation</a></span><span class="op">(</span><span class="va">trips</span>,
                              site <span class="op">=</span> <span class="va">murres</span><span class="op">$</span><span class="va">site</span>,
                              type <span class="op">=</span> <span class="st">"Complete"</span>,
                              timestep <span class="op">=</span> <span class="st">"2 min"</span><span class="op">)</span></code></pre></div>
<p><img src="OPP-workflow_files/figure-html/crawl%20interpolate-1.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/crawl%20interpolate-2.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/crawl%20interpolate-3.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/crawl%20interpolate-4.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/crawl%20interpolate-5.png" width="90%" style="display: block; margin: auto;"><img src="OPP-workflow_files/figure-html/crawl%20interpolate-6.png" width="90%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="summmarizing-our-trips">Summmarizing our trips<a class="anchor" aria-label="anchor" href="#summmarizing-our-trips"></a>
</h2>
<p><code>OPPtools</code> comes with a function to quickly explore trip
details. It accepts the output from either <code>opp_get_trips</code> or
<code>ctcrw_interpolation</code>. If you run <code>sum_trips</code> on
an interpolated output, the table will provide both the raw and
interpolated number of GPS locations.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># opp_get_trips output</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/sum_trips.html">sum_trips</a></span><span class="op">(</span><span class="va">trips</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="12%">
<col width="6%">
<col width="19%">
<col width="19%">
<col width="9%">
<col width="11%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="right">ID</th>
<th align="left">tripID</th>
<th align="right">n_locs</th>
<th align="left">departure</th>
<th align="left">return</th>
<th align="right">duration</th>
<th align="right">max_dist_km</th>
<th align="left">complete</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">248997568</td>
<td align="left">248997568_01</td>
<td align="right">396</td>
<td align="left">2010-07-23 11:16:45</td>
<td align="left">2010-07-23 20:01:38</td>
<td align="right">8.748056</td>
<td align="right">29.986898</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">248997568</td>
<td align="left">248997568_02</td>
<td align="right">134</td>
<td align="left">2010-07-23 20:33:43</td>
<td align="left">2010-07-24 00:05:24</td>
<td align="right">3.528056</td>
<td align="right">9.542494</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">248997568</td>
<td align="left">248997568_03</td>
<td align="right">461</td>
<td align="left">2010-07-24 10:58:34</td>
<td align="left">2010-07-24 18:09:25</td>
<td align="right">7.180833</td>
<td align="right">42.128795</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">248997568</td>
<td align="left">248997568_04</td>
<td align="right">256</td>
<td align="left">2010-07-24 18:30:40</td>
<td align="left">2010-07-25 00:09:01</td>
<td align="right">5.639167</td>
<td align="right">24.637422</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">248998556</td>
<td align="left">248998556_01</td>
<td align="right">105</td>
<td align="left">2010-08-01 03:41:51</td>
<td align="left">2010-08-01 07:30:06</td>
<td align="right">3.804167</td>
<td align="right">7.610807</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249000360</td>
<td align="left">249000360_01</td>
<td align="right">134</td>
<td align="left">2010-08-01 02:13:10</td>
<td align="left">2010-08-01 07:51:58</td>
<td align="right">5.646667</td>
<td align="right">18.071389</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249000360</td>
<td align="left">249000360_02</td>
<td align="right">91</td>
<td align="left">2010-08-01 08:32:54</td>
<td align="left">2010-08-01 12:23:05</td>
<td align="right">3.836389</td>
<td align="right">21.014849</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249001782</td>
<td align="left">249001782_01</td>
<td align="right">330</td>
<td align="left">2010-07-20 13:25:55</td>
<td align="left">2010-07-20 23:15:56</td>
<td align="right">9.833611</td>
<td align="right">17.521209</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249001782</td>
<td align="left">249001782_02</td>
<td align="right">96</td>
<td align="left">2010-07-21 13:02:54</td>
<td align="left">2010-07-21 16:23:01</td>
<td align="right">3.335278</td>
<td align="right">7.799777</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249001782</td>
<td align="left">249001782_03</td>
<td align="right">169</td>
<td align="left">2010-07-21 16:43:08</td>
<td align="left">2010-07-21 23:05:49</td>
<td align="right">6.378056</td>
<td align="right">5.248500</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249003049</td>
<td align="left">249003049_01</td>
<td align="right">291</td>
<td align="left">2010-07-20 12:18:47</td>
<td align="left">2010-07-20 20:52:08</td>
<td align="right">8.555833</td>
<td align="right">16.355226</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249003049</td>
<td align="left">249003049_02</td>
<td align="right">152</td>
<td align="left">2010-07-21 13:02:46</td>
<td align="left">2010-07-21 18:03:08</td>
<td align="right">5.006111</td>
<td align="right">10.493765</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249004362</td>
<td align="left">249004362_01</td>
<td align="right">564</td>
<td align="left">2010-07-17 23:01:45</td>
<td align="left">2010-07-18 11:55:37</td>
<td align="right">12.897778</td>
<td align="right">46.608719</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249004362</td>
<td align="left">249004362_02</td>
<td align="right">492</td>
<td align="left">2010-07-18 22:40:41</td>
<td align="left">2010-07-19 11:49:03</td>
<td align="right">13.139444</td>
<td align="right">27.418362</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249005281</td>
<td align="left">249005281_01</td>
<td align="right">212</td>
<td align="left">2010-07-18 01:51:51</td>
<td align="left">2010-07-18 08:55:54</td>
<td align="right">7.067500</td>
<td align="right">6.577034</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249005281</td>
<td align="left">249005281_02</td>
<td align="right">95</td>
<td align="left">2010-07-19 06:40:12</td>
<td align="left">2010-07-19 09:51:47</td>
<td align="right">3.193056</td>
<td align="right">3.552202</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249015223</td>
<td align="left">249015223_01</td>
<td align="right">549</td>
<td align="left">2010-07-23 09:27:58</td>
<td align="left">2010-07-23 17:51:11</td>
<td align="right">8.386944</td>
<td align="right">39.400588</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249015223</td>
<td align="left">249015223_02</td>
<td align="right">228</td>
<td align="left">2010-07-24 11:00:23</td>
<td align="left">2010-07-24 15:30:05</td>
<td align="right">4.495000</td>
<td align="right">23.248707</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249015223</td>
<td align="left">249015223_03</td>
<td align="right">408</td>
<td align="left">2010-07-24 17:09:30</td>
<td align="left">2010-07-24 21:49:44</td>
<td align="right">4.670556</td>
<td align="right">40.965943</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249018422</td>
<td align="left">249018422_01</td>
<td align="right">266</td>
<td align="left">2010-07-26 22:45:35</td>
<td align="left">2010-07-27 01:00:30</td>
<td align="right">2.248611</td>
<td align="right">28.691684</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249018422</td>
<td align="left">249018422_02</td>
<td align="right">411</td>
<td align="left">2010-07-27 01:55:45</td>
<td align="left">2010-07-27 10:16:28</td>
<td align="right">8.345278</td>
<td align="right">28.414841</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249018422</td>
<td align="left">249018422_03</td>
<td align="right">340</td>
<td align="left">2010-07-27 23:16:16</td>
<td align="left">2010-07-28 09:35:50</td>
<td align="right">10.326111</td>
<td align="right">19.489293</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249019601</td>
<td align="left">249019601_01</td>
<td align="right">276</td>
<td align="left">2010-07-27 02:11:31</td>
<td align="left">2010-07-27 08:39:02</td>
<td align="right">6.458611</td>
<td align="right">26.246196</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249019601</td>
<td align="left">249019601_02</td>
<td align="right">132</td>
<td align="left">2010-07-27 08:47:43</td>
<td align="left">2010-07-27 10:48:00</td>
<td align="right">2.004722</td>
<td align="right">14.501164</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249019601</td>
<td align="left">249019601_03</td>
<td align="right">336</td>
<td align="left">2010-07-27 20:12:03</td>
<td align="left">2010-07-28 06:03:14</td>
<td align="right">9.853056</td>
<td align="right">30.233007</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249019601</td>
<td align="left">249019601_04</td>
<td align="right">271</td>
<td align="left">2010-07-28 06:26:35</td>
<td align="left">2010-07-28 12:15:10</td>
<td align="right">5.809722</td>
<td align="right">25.455589</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249020126</td>
<td align="left">249020126_01</td>
<td align="right">165</td>
<td align="left">2010-07-18 00:18:20</td>
<td align="left">2010-07-18 12:19:43</td>
<td align="right">12.023056</td>
<td align="right">23.861543</td>
<td align="left">Gappy</td>
</tr>
<tr class="even">
<td align="right">249020126</td>
<td align="left">249020126_02</td>
<td align="right">62</td>
<td align="left">2010-07-19 02:45:23</td>
<td align="left">2010-07-19 10:15:42</td>
<td align="right">7.505278</td>
<td align="right">8.723938</td>
<td align="left">Gappy</td>
</tr>
<tr class="odd">
<td align="right">249020607</td>
<td align="left">249020607_01</td>
<td align="right">147</td>
<td align="left">2010-07-23 10:37:37</td>
<td align="left">2010-07-23 12:58:32</td>
<td align="right">2.348611</td>
<td align="right">12.077868</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249020607</td>
<td align="left">249020607_02</td>
<td align="right">205</td>
<td align="left">2010-07-23 18:45:58</td>
<td align="left">2010-07-23 22:51:22</td>
<td align="right">4.090000</td>
<td align="right">17.591702</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249020607</td>
<td align="left">249020607_03</td>
<td align="right">271</td>
<td align="left">2010-07-24 10:15:04</td>
<td align="left">2010-07-24 12:28:25</td>
<td align="right">2.222500</td>
<td align="right">28.285898</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249020607</td>
<td align="left">249020607_04</td>
<td align="right">319</td>
<td align="left">2010-07-24 12:46:43</td>
<td align="left">2010-07-24 18:29:31</td>
<td align="right">5.713333</td>
<td align="right">39.428527</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249020607</td>
<td align="left">249020607_05</td>
<td align="right">106</td>
<td align="left">2010-07-24 19:35:24</td>
<td align="left">2010-07-24 21:36:35</td>
<td align="right">2.019722</td>
<td align="right">15.076746</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249021157</td>
<td align="left">249021157_01</td>
<td align="right">119</td>
<td align="left">2010-07-16 04:48:04</td>
<td align="left">2010-07-16 08:04:23</td>
<td align="right">3.271944</td>
<td align="right">12.772122</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249021568</td>
<td align="left">249021568_01</td>
<td align="right">291</td>
<td align="left">2010-07-20 09:35:15</td>
<td align="left">2010-07-20 19:55:14</td>
<td align="right">10.333056</td>
<td align="right">8.207230</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249021568</td>
<td align="left">249021568_02</td>
<td align="right">188</td>
<td align="left">2010-07-21 12:13:50</td>
<td align="left">2010-07-21 18:59:23</td>
<td align="right">6.759167</td>
<td align="right">5.925852</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249021872</td>
<td align="left">249021872_01</td>
<td align="right">405</td>
<td align="left">2010-07-18 02:26:41</td>
<td align="left">2010-07-18 12:48:53</td>
<td align="right">10.370000</td>
<td align="right">31.665503</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249022698</td>
<td align="left">249022698_01</td>
<td align="right">257</td>
<td align="left">2010-07-20 11:22:36</td>
<td align="left">2010-07-20 19:55:05</td>
<td align="right">8.541389</td>
<td align="right">9.971568</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249024969</td>
<td align="left">249024969_01</td>
<td align="right">420</td>
<td align="left">2010-07-31 22:07:27</td>
<td align="left">2010-08-01 10:39:07</td>
<td align="right">12.527778</td>
<td align="right">43.449078</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249024969</td>
<td align="left">249024969_02</td>
<td align="right">473</td>
<td align="left">2010-08-01 22:49:11</td>
<td align="left">2010-08-02 08:54:57</td>
<td align="right">10.096111</td>
<td align="right">42.944492</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249026731</td>
<td align="left">249026731_01</td>
<td align="right">644</td>
<td align="left">2010-07-26 20:48:52</td>
<td align="left">2010-07-27 13:42:33</td>
<td align="right">16.894722</td>
<td align="right">46.959006</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249026731</td>
<td align="left">249026731_02</td>
<td align="right">348</td>
<td align="left">2010-07-28 00:03:30</td>
<td align="left">2010-07-28 09:22:16</td>
<td align="right">9.312778</td>
<td align="right">25.764023</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249027332</td>
<td align="left">249027332_01</td>
<td align="right">451</td>
<td align="left">2010-07-26 22:41:54</td>
<td align="left">2010-07-27 11:20:46</td>
<td align="right">12.647778</td>
<td align="right">23.217476</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249027332</td>
<td align="left">249027332_02</td>
<td align="right">459</td>
<td align="left">2010-07-27 21:38:47</td>
<td align="left">2010-07-28 11:53:52</td>
<td align="right">14.251389</td>
<td align="right">41.517799</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249027721</td>
<td align="left">249027721_01</td>
<td align="right">107</td>
<td align="left">2010-08-01 04:28:20</td>
<td align="left">2010-08-01 08:48:50</td>
<td align="right">4.341667</td>
<td align="right">6.008208</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249028037</td>
<td align="left">249028037_01</td>
<td align="right">213</td>
<td align="left">2010-07-17 22:20:44</td>
<td align="left">2010-07-18 05:15:17</td>
<td align="right">6.909167</td>
<td align="right">8.545178</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249028037</td>
<td align="left">249028037_02</td>
<td align="right">219</td>
<td align="left">2010-07-19 01:01:47</td>
<td align="left">2010-07-19 06:42:31</td>
<td align="right">5.678889</td>
<td align="right">10.672727</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249028665</td>
<td align="left">249028665_01</td>
<td align="right">167</td>
<td align="left">2010-07-23 14:19:24</td>
<td align="left">2010-07-23 16:59:06</td>
<td align="right">2.661667</td>
<td align="right">14.066203</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="right">249028665</td>
<td align="left">249028665_02</td>
<td align="right">230</td>
<td align="left">2010-07-24 10:32:19</td>
<td align="left">2010-07-24 13:24:08</td>
<td align="right">2.863611</td>
<td align="right">20.478307</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="right">249028665</td>
<td align="left">249028665_03</td>
<td align="right">405</td>
<td align="left">2010-07-24 13:35:46</td>
<td align="left">2010-07-24 21:42:54</td>
<td align="right">8.118889</td>
<td align="right">34.289756</td>
<td align="left">Complete</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># ctcrw_interpolation output</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/sum_trips.html">sum_trips</a></span><span class="op">(</span><span class="va">interp</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="8%">
<col width="10%">
<col width="9%">
<col width="11%">
<col width="16%">
<col width="16%">
<col width="8%">
<col width="10%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">tripID</th>
<th align="right">raw_n_locs</th>
<th align="right">interp_n_locs</th>
<th align="left">departure</th>
<th align="left">return</th>
<th align="right">duration</th>
<th align="right">max_dist_km</th>
<th align="left">complete</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">248997568</td>
<td align="left">248997568_01</td>
<td align="right">396</td>
<td align="right">263</td>
<td align="left">2010-07-23 11:16:45</td>
<td align="left">2010-07-23 20:00:45</td>
<td align="right">8.733333</td>
<td align="right">29.986838</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">248997568</td>
<td align="left">248997568_02</td>
<td align="right">134</td>
<td align="right">106</td>
<td align="left">2010-07-23 20:33:43</td>
<td align="left">2010-07-24 00:03:43</td>
<td align="right">3.500000</td>
<td align="right">9.553705</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">248997568</td>
<td align="left">248997568_03</td>
<td align="right">461</td>
<td align="right">216</td>
<td align="left">2010-07-24 10:58:34</td>
<td align="left">2010-07-24 18:08:34</td>
<td align="right">7.166667</td>
<td align="right">42.124947</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">248997568</td>
<td align="left">248997568_04</td>
<td align="right">256</td>
<td align="right">170</td>
<td align="left">2010-07-24 18:30:40</td>
<td align="left">2010-07-25 00:08:40</td>
<td align="right">5.633333</td>
<td align="right">24.642410</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">248998556</td>
<td align="left">248998556_01</td>
<td align="right">105</td>
<td align="right">115</td>
<td align="left">2010-08-01 03:41:51</td>
<td align="left">2010-08-01 07:29:51</td>
<td align="right">3.800000</td>
<td align="right">7.674928</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249000360</td>
<td align="left">249000360_01</td>
<td align="right">134</td>
<td align="right">170</td>
<td align="left">2010-08-01 02:13:10</td>
<td align="left">2010-08-01 07:51:10</td>
<td align="right">5.633333</td>
<td align="right">18.349014</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249000360</td>
<td align="left">249000360_02</td>
<td align="right">91</td>
<td align="right">116</td>
<td align="left">2010-08-01 08:32:54</td>
<td align="left">2010-08-01 12:22:54</td>
<td align="right">3.833333</td>
<td align="right">21.119422</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249001782</td>
<td align="left">249001782_01</td>
<td align="right">330</td>
<td align="right">296</td>
<td align="left">2010-07-20 13:25:55</td>
<td align="left">2010-07-20 23:15:55</td>
<td align="right">9.833333</td>
<td align="right">17.719221</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249001782</td>
<td align="left">249001782_02</td>
<td align="right">96</td>
<td align="right">101</td>
<td align="left">2010-07-21 13:02:54</td>
<td align="left">2010-07-21 16:22:54</td>
<td align="right">3.333333</td>
<td align="right">7.776569</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249001782</td>
<td align="left">249001782_03</td>
<td align="right">169</td>
<td align="right">192</td>
<td align="left">2010-07-21 16:43:08</td>
<td align="left">2010-07-21 23:05:08</td>
<td align="right">6.366667</td>
<td align="right">5.244025</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249003049</td>
<td align="left">249003049_01</td>
<td align="right">291</td>
<td align="right">257</td>
<td align="left">2010-07-20 12:18:47</td>
<td align="left">2010-07-20 20:50:47</td>
<td align="right">8.533333</td>
<td align="right">16.354897</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249003049</td>
<td align="left">249003049_02</td>
<td align="right">152</td>
<td align="right">151</td>
<td align="left">2010-07-21 13:02:46</td>
<td align="left">2010-07-21 18:02:46</td>
<td align="right">5.000000</td>
<td align="right">10.520169</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249004362</td>
<td align="left">249004362_01</td>
<td align="right">564</td>
<td align="right">387</td>
<td align="left">2010-07-17 23:01:45</td>
<td align="left">2010-07-18 11:53:45</td>
<td align="right">12.866667</td>
<td align="right">46.603741</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249004362</td>
<td align="left">249004362_02</td>
<td align="right">492</td>
<td align="right">395</td>
<td align="left">2010-07-18 22:40:41</td>
<td align="left">2010-07-19 11:48:41</td>
<td align="right">13.133333</td>
<td align="right">27.406692</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249005281</td>
<td align="left">249005281_01</td>
<td align="right">212</td>
<td align="right">213</td>
<td align="left">2010-07-18 01:51:51</td>
<td align="left">2010-07-18 08:55:51</td>
<td align="right">7.066667</td>
<td align="right">6.575981</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249005281</td>
<td align="left">249005281_02</td>
<td align="right">95</td>
<td align="right">96</td>
<td align="left">2010-07-19 06:40:12</td>
<td align="left">2010-07-19 09:50:12</td>
<td align="right">3.166667</td>
<td align="right">3.551922</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249015223</td>
<td align="left">249015223_01</td>
<td align="right">549</td>
<td align="right">252</td>
<td align="left">2010-07-23 09:27:58</td>
<td align="left">2010-07-23 17:49:58</td>
<td align="right">8.366667</td>
<td align="right">39.432524</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249015223</td>
<td align="left">249015223_02</td>
<td align="right">228</td>
<td align="right">135</td>
<td align="left">2010-07-24 11:00:23</td>
<td align="left">2010-07-24 15:28:23</td>
<td align="right">4.466667</td>
<td align="right">23.248385</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249015223</td>
<td align="left">249015223_03</td>
<td align="right">408</td>
<td align="right">141</td>
<td align="left">2010-07-24 17:09:30</td>
<td align="left">2010-07-24 21:49:30</td>
<td align="right">4.666667</td>
<td align="right">40.971961</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249018422</td>
<td align="left">249018422_01</td>
<td align="right">266</td>
<td align="right">68</td>
<td align="left">2010-07-26 22:45:35</td>
<td align="left">2010-07-27 00:59:35</td>
<td align="right">2.233333</td>
<td align="right">28.689044</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249018422</td>
<td align="left">249018422_02</td>
<td align="right">411</td>
<td align="right">251</td>
<td align="left">2010-07-27 01:55:45</td>
<td align="left">2010-07-27 10:15:45</td>
<td align="right">8.333333</td>
<td align="right">28.408133</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249018422</td>
<td align="left">249018422_03</td>
<td align="right">340</td>
<td align="right">310</td>
<td align="left">2010-07-27 23:16:16</td>
<td align="left">2010-07-28 09:34:16</td>
<td align="right">10.300000</td>
<td align="right">19.499394</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249019601</td>
<td align="left">249019601_01</td>
<td align="right">276</td>
<td align="right">194</td>
<td align="left">2010-07-27 02:11:31</td>
<td align="left">2010-07-27 08:37:31</td>
<td align="right">6.433333</td>
<td align="right">26.258579</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249019601</td>
<td align="left">249019601_02</td>
<td align="right">132</td>
<td align="right">61</td>
<td align="left">2010-07-27 08:47:43</td>
<td align="left">2010-07-27 10:47:43</td>
<td align="right">2.000000</td>
<td align="right">14.503237</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249019601</td>
<td align="left">249019601_03</td>
<td align="right">336</td>
<td align="right">296</td>
<td align="left">2010-07-27 20:12:03</td>
<td align="left">2010-07-28 06:02:03</td>
<td align="right">9.833333</td>
<td align="right">30.201629</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249019601</td>
<td align="left">249019601_04</td>
<td align="right">271</td>
<td align="right">175</td>
<td align="left">2010-07-28 06:26:35</td>
<td align="left">2010-07-28 12:14:35</td>
<td align="right">5.800000</td>
<td align="right">25.460352</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249020607</td>
<td align="left">249020607_01</td>
<td align="right">147</td>
<td align="right">71</td>
<td align="left">2010-07-23 10:37:37</td>
<td align="left">2010-07-23 12:57:37</td>
<td align="right">2.333333</td>
<td align="right">12.063880</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249020607</td>
<td align="left">249020607_02</td>
<td align="right">205</td>
<td align="right">123</td>
<td align="left">2010-07-23 18:45:58</td>
<td align="left">2010-07-23 22:49:58</td>
<td align="right">4.066667</td>
<td align="right">17.598997</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249020607</td>
<td align="left">249020607_03</td>
<td align="right">271</td>
<td align="right">67</td>
<td align="left">2010-07-24 10:15:04</td>
<td align="left">2010-07-24 12:27:04</td>
<td align="right">2.200000</td>
<td align="right">28.329173</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249020607</td>
<td align="left">249020607_04</td>
<td align="right">319</td>
<td align="right">172</td>
<td align="left">2010-07-24 12:46:43</td>
<td align="left">2010-07-24 18:28:43</td>
<td align="right">5.700000</td>
<td align="right">39.538849</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249020607</td>
<td align="left">249020607_05</td>
<td align="right">106</td>
<td align="right">61</td>
<td align="left">2010-07-24 19:35:24</td>
<td align="left">2010-07-24 21:35:24</td>
<td align="right">2.000000</td>
<td align="right">15.102340</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249021157</td>
<td align="left">249021157_01</td>
<td align="right">119</td>
<td align="right">99</td>
<td align="left">2010-07-16 04:48:04</td>
<td align="left">2010-07-16 08:04:04</td>
<td align="right">3.266667</td>
<td align="right">12.832368</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249021568</td>
<td align="left">249021568_01</td>
<td align="right">291</td>
<td align="right">310</td>
<td align="left">2010-07-20 09:35:15</td>
<td align="left">2010-07-20 19:53:15</td>
<td align="right">10.300000</td>
<td align="right">8.228432</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249021568</td>
<td align="left">249021568_02</td>
<td align="right">188</td>
<td align="right">203</td>
<td align="left">2010-07-21 12:13:50</td>
<td align="left">2010-07-21 18:57:50</td>
<td align="right">6.733333</td>
<td align="right">5.919944</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249021872</td>
<td align="left">249021872_01</td>
<td align="right">405</td>
<td align="right">312</td>
<td align="left">2010-07-18 02:26:41</td>
<td align="left">2010-07-18 12:48:41</td>
<td align="right">10.366667</td>
<td align="right">31.700585</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249022698</td>
<td align="left">249022698_01</td>
<td align="right">257</td>
<td align="right">257</td>
<td align="left">2010-07-20 11:22:36</td>
<td align="left">2010-07-20 19:54:36</td>
<td align="right">8.533333</td>
<td align="right">9.976401</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249024969</td>
<td align="left">249024969_01</td>
<td align="right">420</td>
<td align="right">376</td>
<td align="left">2010-07-31 22:07:27</td>
<td align="left">2010-08-01 10:37:27</td>
<td align="right">12.500000</td>
<td align="right">43.454672</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249024969</td>
<td align="left">249024969_02</td>
<td align="right">473</td>
<td align="right">303</td>
<td align="left">2010-08-01 22:49:11</td>
<td align="left">2010-08-02 08:53:11</td>
<td align="right">10.066667</td>
<td align="right">42.925513</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249026731</td>
<td align="left">249026731_01</td>
<td align="right">644</td>
<td align="right">507</td>
<td align="left">2010-07-26 20:48:52</td>
<td align="left">2010-07-27 13:40:52</td>
<td align="right">16.866667</td>
<td align="right">46.897231</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249026731</td>
<td align="left">249026731_02</td>
<td align="right">348</td>
<td align="right">280</td>
<td align="left">2010-07-28 00:03:30</td>
<td align="left">2010-07-28 09:21:30</td>
<td align="right">9.300000</td>
<td align="right">25.758922</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249027332</td>
<td align="left">249027332_01</td>
<td align="right">451</td>
<td align="right">380</td>
<td align="left">2010-07-26 22:41:54</td>
<td align="left">2010-07-27 11:19:54</td>
<td align="right">12.633333</td>
<td align="right">23.283145</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249027332</td>
<td align="left">249027332_02</td>
<td align="right">459</td>
<td align="right">428</td>
<td align="left">2010-07-27 21:38:47</td>
<td align="left">2010-07-28 11:52:47</td>
<td align="right">14.233333</td>
<td align="right">41.517828</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249027721</td>
<td align="left">249027721_01</td>
<td align="right">107</td>
<td align="right">131</td>
<td align="left">2010-08-01 04:28:20</td>
<td align="left">2010-08-01 08:48:20</td>
<td align="right">4.333333</td>
<td align="right">5.980887</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249028037</td>
<td align="left">249028037_01</td>
<td align="right">213</td>
<td align="right">208</td>
<td align="left">2010-07-17 22:20:44</td>
<td align="left">2010-07-18 05:14:44</td>
<td align="right">6.900000</td>
<td align="right">8.559769</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249028037</td>
<td align="left">249028037_02</td>
<td align="right">219</td>
<td align="right">171</td>
<td align="left">2010-07-19 01:01:47</td>
<td align="left">2010-07-19 06:41:47</td>
<td align="right">5.666667</td>
<td align="right">10.673282</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249028665</td>
<td align="left">249028665_01</td>
<td align="right">167</td>
<td align="right">80</td>
<td align="left">2010-07-23 14:19:24</td>
<td align="left">2010-07-23 16:57:24</td>
<td align="right">2.633333</td>
<td align="right">14.080959</td>
<td align="left">Complete</td>
</tr>
<tr class="odd">
<td align="left">249028665</td>
<td align="left">249028665_02</td>
<td align="right">230</td>
<td align="right">86</td>
<td align="left">2010-07-24 10:32:19</td>
<td align="left">2010-07-24 13:22:19</td>
<td align="right">2.833333</td>
<td align="right">20.482305</td>
<td align="left">Complete</td>
</tr>
<tr class="even">
<td align="left">249028665</td>
<td align="left">249028665_03</td>
<td align="right">405</td>
<td align="right">244</td>
<td align="left">2010-07-24 13:35:46</td>
<td align="left">2010-07-24 21:41:46</td>
<td align="right">8.100000</td>
<td align="right">34.289525</td>
<td align="left">Complete</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="calculate-kernels">Calculate kernels<a class="anchor" aria-label="anchor" href="#calculate-kernels"></a>
</h2>
<p>There are two mapping methods for exploring key marine sites for
seabirds using OPPtools: the first is a traditional kernel density
estimate, and the second is Brownian Bridge Movement Model (BBMM) kernel
density estimate. The first output is summarized and presented with the
<code>track2KBA</code> mapping approach, while the second is a simple
BBMM 50% or 95% UD contour.</p>
<div class="section level3">
<h3 id="traditional-kde">1. Traditional KDE<a class="anchor" aria-label="anchor" href="#traditional-kde"></a>
</h3>
<p>The traditional KDE workflow is adapted from the
<code>track2KBA</code> workflow, which can be found in greater detail <a href="https://cran.r-project.org/web/packages/track2KBA/vignettes/track2kba_workflow.html" class="external-link">here</a>.</p>
<p>The <code>track2KBA</code> workflow has been simplified and condensed
within the <code>OPPtools</code> package. Kernel smoothers are
calculated within the same function that generates the kernel itself. By
default, the <code>href</code> method of calculating kernel smoothers is
used. See <code><a href="../reference/opp_kernel.html">?opp_kernel</a></code> for further details.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kde</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opp_kernel.html">opp_kernel</a></span><span class="op">(</span><span class="va">interp</span>,
                  res <span class="op">=</span> <span class="fl">1</span> <span class="co"># grid resolution in sq km</span>
                  <span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bbmm-kde">2. BBMM KDE<a class="anchor" aria-label="anchor" href="#bbmm-kde"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bb_kde</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opp_bbmm.html">opp_bbmm</a></span><span class="op">(</span><span class="va">interp</span>,
                   res <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="more-fun-with-kernels">More fun with kernels<a class="anchor" aria-label="anchor" href="#more-fun-with-kernels"></a>
</h3>
<p>With either of our kernels, we can use the <code>ud_stack</code>
function if we are interested in taking a look at a population-level
raster. <code>ud_stack</code> accepts a <code>weights</code> argument if
you want to weigh certain tracks as more important than others in your
stack. In this example, we will weight our bbmm kernels by number of
locations in a track. We want longer tracks (that go farther from the
colony) to have more importance in our population level kernel.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Using a combination of aggregate and sum_trips, </span>
<span class="co"># let's pull out the number of locations per animal</span>
<span class="va">n_locs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="va">interp_n_locs</span> <span class="op">~</span> <span class="va">ID</span>, data <span class="op">=</span> <span class="fu"><a href="../reference/sum_trips.html">sum_trips</a></span><span class="op">(</span><span class="va">interp</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>

<span class="co"># Stack our bbmm kernels, weighted by n_locs</span>
<span class="va">pop_bbmm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ud_stack.html">ud_stack</a></span><span class="op">(</span><span class="va">bb_kde</span>, <span class="va">n_locs</span><span class="op">)</span>

<span class="co"># Might be nice to compare to non-weighted</span>

<span class="co"># Now we can visualize</span>
<span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">pop_bbmm</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-fc292f9a983bf6119b19" style="width:90%;height:1351.97775030902px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-fc292f9a983bf6119b19">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAA2CAYAAAAic3xcAAAIpklEQVR4nO2ae4hcVx3HP79z7sydnZlskt1uNukmTfNom5YmjSkl2KZakRQVH4UiBl9FBfEPwRdI9Q+hFvxL0YKC+o9/FAoFpVgEbSk09IVKsA0VYkmT2CRNNt1Nsu953Xt+/jF7b2Zm72ZnZzc7MzKf/WvPPfecc893zu91rwyt36v06BpMuxfQY3n0BOsyeoJ1GT3BuoyeYF1GT7AuoydYl9ETrMvoCdZl9ASbRxByJtfuZSzJmgs2aAfwxFvraRdFEDImw5mfzDLn5tq9nCVZc8GuuklCDdd62kQ88fixd5iiK7LzyXUonV9WlXYVfwXpig3qNNrmw3pitUZbgw5BWrp2o9ZgxK7JnCuhrYIpyiG7F1/8xGurQdLYSfOkJM1jPBC3r9UPZrm0Pax/Pfw3JS0t+HUfsnsZtAMtbVw0lhHL74YeWrRf7dgVLfMHfQVByJs835CPLujTCbQt6EjigLeHt8PTVLSMEYubjyZTkibQSlOnzohlhx3hdHAu7l87VkRS0NPYb6PdwDO37+eTJ46u8MkWkjd5dpsR3greWdZ9HSVYRO3GCcLzt3+Mx069yYSbWrDx10MQrFgCDRado13RqhGLLz7bzCaOyO38tPJiU/fdMMFWYyOiDbdYvmc+wlEucsz9J1GAJPpMlrvNrRwLTnRsVJoxGYbMRs4FF5vqf0MEa0WsyFcoiiCIVN2rqovHahw3EjTUMHG+vMkz42boM1kKHVjF8MTDF59ZN9v0PasedCzmpKXmL55cbJ1QEYoyZAYAsGLjfo2iKMrddhciJu6TMZn4+m+Hq1Ffwc3F5bB2phKN44caUtDissZYdcGiUH3AblzQHv1B1RTUnp5GLoVjOA0JNKjrFwnjiYcgnAj/iy8+u+xWcibHF/VgLM7XRl8Gqhu1z+6O17FYvnWjzWatpYh+gMvxyXCDTOJGu4GCFim5Eru9W7jgxps69kmnqNHsRX0EYZ3JAzDtZlCUbd4WzgejbPU2M6MFJt10vCFJkeJasNpBzYpPWK2ZG7ZD9Jt1TLppSq6EorwbnG3aRtc+WHSCGn1W7f9TbpopNx0LGDnu7XoTvxg4iKqL+5o25FO1610tc7tiwbZ4m8iaLABj7goOxWLjhe70tsXvmaJFN/qyRlKS5rDsp9/2I0jVLNaYRKgX14jFzreLGF4L3+brYy/E1zMmQ6ABeZOvm7d2PbW+73ostfZaGv3yatC0YN+Uh3jQ7lvQfji8g51mS3VR6ph1s1S0HF8/E74fv2eKggOoBhOLPXhFy/zVHWMf28mYvupCxSJiUHWkJM16u77u/k12EEESzd5BuQMjlq/ofYmbmJY0H2dvU/tQ64fbQdM+bNAOUNIyRS1WN0zyTOssDqWi5Tg3aoz6Gs1C5PR32BHGdZI5V8AgVAgW9TGCcJMd5LK7itOQQ3Yvn/Ju5ufBP7kaTtBv+5kKp+J5jVjSkqLo6iMwX3xKWlow/lL+rZNeBZlnn3vqiWY6Xg6voCieeKyXPCXKzLk5iq5AOF8xiEyTiKkzHY1mRNVxOjjHZDiJ4hCROn8TUXvPWDiOqquKpzmerLzKPWzHiuWIO0Ba0lixpCRNVvq4y9yKIHXF3ySxgMSyVS2dIhYs04dFkd8H7jIT4SSK8mU5xAFvTxyiOhRVx9NbHuZhc29sQqJEGOrNii8+gQakJU1K0nW5Wcb01X1OkDF9WLH82f2DoitwNDxOqCG/16OUtYxD2WqHeZA9vDlfo9tvdl/X7yS1d5JAjSxLMDcfWtf+Iv9uz3JWx+r6iBi+OvoSL7hjALFvSSq2/iz3IDvsCPebO8mbLH2SiU/o5/RDbLc3x/7ORPnXvPi+qX914ovPqLvMKTMet33G20pa0onPI8iCMTqZZ5976omWv4aJNv8DnaCslbprjSZmi7eJSTezILwfNBv54czLlLTESd6ruyYIz+obbND118ZFKWsFgxACm8wgF/RS1SSLoegKDNshsvhYsTiUDb5QKlVf32hNThYl441+rtNZcVg/FU5RdAVg8ZD3QnApMRcbC8cX+JXIJIoYMqaPSTdNqGFVAA3jU2bFci64ECfU0ckcd1d4fPN2UpImLSken3mNvMnHPlIQ+iSzIrO3nNB+tVmxYJE/isLuiGYfSpDYd0XRXZRTDZsBfPHxJIVg6DfryEofG6Q/bo/M5S4zQlpS5EyOX1+8yG1mKyNmE/tlB5/We66tScyyiq1J642eux2s2geCjWZwp7eNCZ3hSng1frg+k01MAbbYIS67ibg9JWlKWuJ8OFpXiR8Lq75pium4ny8+oYQojpxk2SmbOeiGyRnDbOh43pzk0dwIf5y15EyOOVfA0XqJqt0ByaoUfxtPkiCcCs7GqUDEt7i/Wl2f7x+lAOeCC1gMIkJZKxTc3LXC73U2qKJlSloiK338YGAXt8owX0jfwnf/9h6ffeAS33n6DfaFN/N8YRRffO5kG0GDv13us7WblgS7z7uLA96e+P+kKnQSv3Qvxa/EBcHN97NimXYzFF1x2QXaQAOuhhN8e/x1+tXn8z/6E2bkDoa/PwYzs4yQ5ZHsZjLi85a+W2e2F6P2VVAz/deSlkziseBEYnuz5sKTFIoj1DAOq6v5W+umKsQxLjO8+KtH+cRtrxAe/4C//OYRTssVjhYmyIpPQIiqUs3YFl9rXfmqQ75SjmhJsNpC7PXeaS1GRcv0m3UUKK1aWB1owKhO8MzEKCe/dJBZF3LcvM95c5UyFcL5KDFcgf/qBFoOOgRpSayIKTfd6tQLUJRAK0y4Kf5lzvCOXMQZpUCJsqtUy1+Ya5WYDq5kLMWKE+dOIRJt2oXMUg3bXcMak+qV3UZLgi318Uu70Hk/qLWF5g5a32rQUgj0sLmXI3y4Yzej8fuR/ydaOmFRUbfH2tNZSUaPJekJ1mX0BOsyeoJ1GT3BuoyeYF1GT7AuoydYl9ETrMv4HwAz37dwlwOLAAAAAElFTkSuQmCC",[[63.3041847756139,-83.1279385611565],[62.815469097018,-80.9743958833552]],0.8,null,"pop_bbmm","pop_bbmm"]},{"method":"removeLayersControl","args":[]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"pop_bbmm",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addControl","args":["","topright","imageValues-pop_bbmm","info legend "]},{"method":"addImageQuery","args":["pop_bbmm",[-83.1279385611565,62.815469097018,-80.9743958833552,63.3041847756139],"mousemove",7,"Layer"]},{"method":"addLegend","args":[{"colors":["#040404 , #040404 4.46799570309486e-16%, #3F1350 17.0938331526231%, #881171 34.1876663052463%, #C9366E 51.2814994578694%, #F3762F 68.3753326104926%, #F8C047 85.4691657631157%, #FFFE9E "],"labels":["0","0","0","0","0","0"],"na_color":"#BEBEBE","na_label":"NA","opacity":1,"position":"topright","type":"numeric","title":"pop_bbmm","extra":{"p_1":4.46799570309486e-18,"p_n":0.854691657631157},"layerId":null,"className":"info legend","group":"pop_bbmm"}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-83.1279385611565,62.815469097018,-80.9743958833552,63.3041847756139,true,"pop_bbmm","Zoom to pop_bbmm","<strong> pop_bbmm <\/strong>","bottomright"]}],"limits":{"lat":[62.815469097018,63.3041847756139],"lng":[-83.1279385611565,-80.9743958833552]}},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script><p>A common workflow for rasterized UDs typically involves extracting
the 50% and 99% volume contours. With the <code>ud_vol</code> function,
we can specify which contours we want to extract and reclassify the
raster to show our two contour values:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># By default, the two volume levels are 50% and 99%, but these can be changed if desired.</span>
<span class="va">pop_vols</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ud_vol.html">ud_vol</a></span><span class="op">(</span><span class="va">pop_bbmm</span><span class="op">)</span>

<span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pop_vols</span><span class="op">)</span></code></pre></div>
<p><img src="OPP-workflow_files/figure-html/ud%20vol-1.png" width="90%" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Sarah Popov, Allison Patterson, CIDA Research Tools
Committee, Ryan Peterson, Caroline Ledbetter.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
